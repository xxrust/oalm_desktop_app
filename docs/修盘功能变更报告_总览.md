# 修盘数据接入（grid）变更报告（总览）

## 1. 交付目标

1) 从数据库读取“修盘”数据（`grid` 表）并在界面展示；  
2) 支持按设备/修盘方式/日期范围筛选；  
3) 在修盘页触发“修盘后质量变化”分析图表（按修盘后的第 N 盘/批次）。

## 2. 数据来源

- SQL 备份：`数据库备份\\江西\\olam_demo_250411.sql`
- 表：`public.grid`
- 关键字段：`id/device_id/grid_mod/set_round/start_time/end_time/round_num/end_way`

## 3. 改动清单

### 3.1 后端（olam_api_server）

- 新增：`GET /api/grid`、`GET /api/grid/options`
- 增强：`GET /api/analysis/repair-effect`（按盘数，新增 `maxBatches`）

### 3.2 前端/桌面端（oalm_desktop_app）

- 菜单新增“修盘数据”（`/grid`）
- 修盘页实现：
  - 筛选（设备/修盘方式/日期/条数）
  - 表格展示 grid 记录
  - 图表展示修盘后第 N 盘的质量变化（avg/std/count）

## 4. 客户研发二次开发指引（最短路径）

- 增加字段：后端 `/api/grid` 返回字段 + 前端表格 `el-table-column`
- 增加筛选：前端新增控件并传参 + 后端追加参数化 SQL 条件
- 调整盘数范围：前端传 `maxBatches` 或调整默认值

